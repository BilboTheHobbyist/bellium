/*!
 * Ghostium
 * A Ghost theme focused on content based on Medium design/ux
 * http://ghostium.oswaldoacauan.com/
 * @author Oswaldo Acauan http://oswaldoacauan.com
 * @version 2.3.1
 * Copyright 2013. MIT licensed.
 */

var Drawer=function(n,e){"use strict";var a={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"}[Modernizr.prefixed("transition")],t=n("body"),o=n("#container"),r=n(".drawer-overlay"),i={open:function(){t.addClass("drawer-open drawer-transition")},close:function(){t.removeClass("drawer-open")},isOpen:function(){return t.hasClass("drawer-open")},bindOverlay:function(){r.on("click",function(n){n.preventDefault(),t.hasClass("drawer-open")&&i.close()})},bindAnchors:function(){n(".drawer-list a").on("click",function(n){i.close()})},bindContainerTransEnd:function(){o.on(a,function(n){t.hasClass("drawer-open")||t.removeClass("drawer-transition")})},init:function(){i.bindOverlay(),i.bindAnchors(),i.bindContainerTransEnd()}};return{init:i.init,open:i.open,close:i.close,isOpen:i.isOpen}}(jQuery),ImageLoader=function(n){"use strict";n("body"),n("#container"),n(".drawer-overlay");var e={done:function(n){n.addClass("image-loaded")},success:function(n,a){n.css("background-image","url("+a.src+")"),e.done(n)},init:function(n){var a=new Image,t=n.data("load-image");return t.length&&(a.src=t,a.onload=e.success(n,a),a.onerror=e.done(n),a.onabort=e.done(n)),a}};return{load:e.init}}(jQuery);!function(n,e,a,t){"use strict";n(function(){var t=e.GHOSTIUM,o=n(e),r=n(a),i=(n(a.documentElement),n(a.body)),s=n("head"),c=i,d=n(".content",c);FastClick.attach(a.body),Drawer.init(),Prism.languages.html=Prism.languages.markup;var u=function(){n("code").not('[class*="language-"]').addClass(function(){var e=n(this).attr("class")||"markup";return e=e.replace(/(language|lang)+\-/gi,""),"language-"+(Prism.languages.hasOwnProperty(e)?e:"markup")}),Prism.highlightAll()};u();var l=function(){t.haveDisqus&&"object"==typeof DISQUS&&n("#disqus_thread").length&&DISQUS.reset({reload:!0,config:function(){this.page.identifier=disqus_identifier}})},f=function(){if(t.haveDisqus){if("object"==typeof DISQUSWIDGETS){var a=i.find("[data-disqus-identifier]"),o=s.find('script[src*="disqus.com/count-data.js"]'),r=a.map(function(){return"1="+encodeURIComponent(n(this).data("disqus-identifier"))}).sort().get();o.remove(),r.length&&(s.append(n("<script/>",{async:!0,src:"//"+e.disqus_shortname+".disqus.com/count.js?"+r.join("&")})),DISQUSWIDGETS.getCount())}}else n("[data-disqus-identifier]").parent("li").remove()};f();var h=function(){t.haveGA&&"function"==typeof ga&&(ga("set","location",e.location.href),ga("send","pageview"))};if(n.support.pjax&&t.enablePjax){r.on("pjax:start",function(){c.scrollTop(0)}),r.on("pjax:end",function(){l(),h(),f(),u(),n("[data-load-image]",d).each(function(){ImageLoader.load(n(this))})});var p={container:"[data-pjax-container]",fragment:"[data-pjax-container]"};r.pjax("a[data-pjax]",p),r.on("submit","form[data-pjax]",function(e){n.pjax.submit(e,p)})}r.on("click","[data-action]",function(t){var o=n(this).data("action"),r=function(n,a,t){var o=void 0!==e.screenLeft?e.screenLeft:screen.left,r=void 0!==e.screenTop?e.screenTop:screen.top,i=screen.width/2-t/2+o,s=screen.height/2-a/2+r,c=e.open(n,"","toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=no,resizable=no,copyhistory=no, width="+t+", height="+a+", top="+s+", left="+i);return e.focus&&c.focus(),c};switch(t.preventDefault(),o){case"open-drawer":Drawer.open();break;case"close-drawer":Drawer.close();break;case"share-gplus":r("https://plus.google.com/share?url="+encodeURIComponent(location.href),600,600);break;case"share-facebook":r("https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(location.href),436,626);break;case"share-twitter":r("https://twitter.com/share?url="+encodeURIComponent(location.href)+"&text="+encodeURIComponent(a.title),440,550)}return!1}),n("[data-load-image]",i).each(function(){ImageLoader.load(n(this))}),c.on("scroll",function(){var e=c.scrollTop(),a=n("#drawer-button");0===e?a.removeClass("drawer-button-hidden"):a.hasClass("drawer-button-hidden")||a.addClass("drawer-button-hidden")}),r.on("click","a[href^=#]:not([href=#])",function(e){e.preventDefault();var a=n(this.hash);if((a=a.length?a:n("[name="+this.hash.slice(1)+"]")).length)return c.animate({scrollTop:a.offset().top},500),location.hash=this.hash,!1}),c.on("touchstart",function(n){}),i.hasClass("home-template")&&n(".wrapper").eq(0).focus(),o.on("orientationchange",function(n){l()})})}(jQuery,window,document);